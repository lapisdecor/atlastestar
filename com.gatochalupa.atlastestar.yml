id: com.gatochalupa.atlastestar
runtime: org.gnome.Platform
runtime-version: '49'
sdk: org.gnome.Sdk
command: atlastestar
finish-args:
  - --device=dri
  - --socket=wayland
  - --socket=fallback-x11

modules:
  - name: nim
    buildsystem: simple
    cleanup:
      - "*"
    build-commands:
      - sh install.sh /app
    sources:
      - type: archive
        url: https://nim-lang.org/download/nim-2.2.6-linux_x64.tar.xz
        sha256: 38b8407f87d78bd207390051e4c76f38a45d0a26983cb262017c899b56ad8d06
  
  - name: atlastestar
    buildsystem: simple
    build-commands:
      - /app/nim/bin/nim c -d:release atlastestar.nim
      - install -Dm755 atlastestar /app/bin/atlastestar
    sources:
      - type: dir
        path: .
      - type: file
        path: nim.cfg
